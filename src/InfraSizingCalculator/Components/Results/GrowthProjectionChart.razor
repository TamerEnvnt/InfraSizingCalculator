@using InfraSizingCalculator.Models.Growth

<div class="growth-projection-dashboard @AdditionalClass">
    @if (Projection != null && Projection.Points.Any())
    {
        <!-- Hero Metrics Row -->
        <div class="hero-metrics">
            <div class="hero-metric apps">
                <div class="hero-icon">
                    <span class="icon-inner">ğŸ“±</span>
                </div>
                <div class="hero-content">
                    <span class="hero-label">Application Growth</span>
                    <div class="hero-values">
                        <span class="hero-current">@Projection.Baseline.ProjectedApps</span>
                        <span class="hero-arrow">â†’</span>
                        <span class="hero-projected">@GetFinalPoint().ProjectedApps</span>
                    </div>
                    <div class="hero-change positive">
                        <span class="change-icon">â–²</span>
                        <span class="change-value">+@Projection.Summary.TotalAppGrowth (@Projection.Summary.PercentageAppGrowth.ToString("F0")%)</span>
                    </div>
                </div>
            </div>

            <div class="hero-metric nodes">
                <div class="hero-icon">
                    <span class="icon-inner">ğŸ–¥ï¸</span>
                </div>
                <div class="hero-content">
                    <span class="hero-label">Infrastructure Growth</span>
                    <div class="hero-values">
                        <span class="hero-current">@Projection.Baseline.ProjectedNodes</span>
                        <span class="hero-arrow">â†’</span>
                        <span class="hero-projected">@GetFinalPoint().ProjectedNodes</span>
                    </div>
                    <div class="hero-change positive">
                        <span class="change-icon">â–²</span>
                        <span class="change-value">+@Projection.Summary.TotalNodeGrowth nodes (@Projection.Summary.PercentageNodeGrowth.ToString("F0")%)</span>
                    </div>
                </div>
            </div>

            @if (Projection.Settings.IncludeCostProjections)
            {
                <div class="hero-metric cost">
                    <div class="hero-icon">
                        <span class="icon-inner">ğŸ’°</span>
                    </div>
                    <div class="hero-content">
                        <span class="hero-label">Cost Over Period</span>
                        <div class="hero-values single">
                            <span class="hero-total">@FormatCurrency(Projection.Summary.TotalCostOverPeriod)</span>
                        </div>
                        <div class="hero-change @(Projection.Summary.CostIncrease > 0 ? "negative" : "neutral")">
                            <span class="change-icon">@(Projection.Summary.CostIncrease > 0 ? "â–²" : "â€”")</span>
                            <span class="change-value">@(Projection.Summary.CostIncrease > 0 ? $"+{FormatCurrency(Projection.Summary.CostIncrease)}" : "No change")</span>
                        </div>
                    </div>
                </div>

                <div class="hero-metric average">
                    <div class="hero-icon">
                        <span class="icon-inner">ğŸ“Š</span>
                    </div>
                    <div class="hero-content">
                        <span class="hero-label">Avg Yearly Cost</span>
                        <div class="hero-values single">
                            <span class="hero-total">@FormatCurrency(Projection.Summary.AverageYearlyCost)</span>
                        </div>
                        <div class="hero-detail">
                            <span>~@FormatCurrency(Projection.Summary.AverageYearlyCost / 12)/month</span>
                        </div>
                    </div>
                </div>
            }
        </div>

        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
            <button class="tab-btn @(chartView == "resources" ? "active" : "")" @onclick='() => chartView = "resources"'>
                <span class="tab-icon">ğŸ“¦</span>
                <span class="tab-text">Resources</span>
            </button>
            @if (Projection.Settings.IncludeCostProjections)
            {
                <button class="tab-btn @(chartView == "cost" ? "active" : "")" @onclick='() => chartView = "cost"'>
                    <span class="tab-icon">ğŸ’µ</span>
                    <span class="tab-text">Cost Analysis</span>
                </button>
            }
            <button class="tab-btn @(chartView == "table" ? "active" : "")" @onclick='() => chartView = "table"'>
                <span class="tab-icon">ğŸ“‹</span>
                <span class="tab-text">Data Table</span>
            </button>
        </div>

        <!-- Resources View -->
        @if (chartView == "resources")
        {
            <div class="dashboard-content">
                <!-- Year-by-Year Progress -->
                <div class="progress-section">
                    <div class="section-header">
                        <h3>Growth Timeline</h3>
                        <span class="section-subtitle">Year-by-year infrastructure scaling</span>
                    </div>
                    <div class="year-progress-cards">
                        @foreach (var point in GetAllPoints())
                        {
                            var isBaseline = point.Year == 0;
                            var maxNodes = GetMaxNodes();
                            var progressPct = maxNodes > 0 ? (point.ProjectedNodes * 100.0 / maxNodes) : 0;

                            <div class="year-card @(isBaseline ? "baseline" : "")">
                                <div class="year-header">
                                    <span class="year-label">@point.Label</span>
                                    @if (!isBaseline)
                                    {
                                        <span class="year-growth">+@point.GrowthFromPrevious.ToString("F0")%</span>
                                    }
                                </div>
                                <div class="year-node-count">
                                    <span class="node-number">@point.ProjectedNodes</span>
                                    <span class="node-label">nodes</span>
                                </div>
                                <div class="year-progress-bar">
                                    <div class="progress-fill @(isBaseline ? "baseline-fill" : "")" style="width: @progressPct%"></div>
                                </div>
                                <div class="year-resources">
                                    <div class="resource-item">
                                        <span class="res-icon">âš¡</span>
                                        <span class="res-value">@point.ProjectedCpu vCPU</span>
                                    </div>
                                    <div class="resource-item">
                                        <span class="res-icon">ğŸ’¾</span>
                                        <span class="res-value">@point.ProjectedRamGB.ToString("N0") GB</span>
                                    </div>
                                    <div class="resource-item">
                                        <span class="res-icon">ğŸ’¿</span>
                                        <span class="res-value">@((point.ProjectedStorageGB / 1024).ToString("F1")) TB</span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>

                <!-- Resource Breakdown -->
                <div class="breakdown-section">
                    <div class="section-header">
                        <h3>Resource Details</h3>
                        <span class="section-subtitle">Detailed breakdown by year</span>
                    </div>
                    <div class="resource-table-wrapper">
                        <table class="resource-table">
                            <thead>
                                <tr>
                                    <th>Period</th>
                                    <th class="center">Apps</th>
                                    <th class="center">Nodes</th>
                                    <th class="center">vCPU</th>
                                    <th class="center">RAM (GB)</th>
                                    <th class="center">Storage (GB)</th>
                                    <th class="right">Growth</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var point in GetAllPoints())
                                {
                                    var isBaseline = point.Year == 0;
                                    <tr class="@(isBaseline ? "baseline-row" : "")">
                                        <td class="period-cell">
                                            <span class="period-dot @(isBaseline ? "baseline" : "")"></span>
                                            @point.Label
                                        </td>
                                        <td class="center">@point.ProjectedApps</td>
                                        <td class="center highlight">@point.ProjectedNodes</td>
                                        <td class="center">@point.ProjectedCpu</td>
                                        <td class="center">@point.ProjectedRamGB.ToString("N0")</td>
                                        <td class="center">@point.ProjectedStorageGB.ToString("N0")</td>
                                        <td class="right growth-cell">
                                            @if (isBaseline)
                                            {
                                                <span class="baseline-tag">Baseline</span>
                                            }
                                            else
                                            {
                                                <span class="growth-badge">+@point.CumulativeGrowth.ToString("F0")%</span>
                                            }
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        }

        <!-- Cost View -->
        @if (chartView == "cost" && Projection.Settings.IncludeCostProjections)
        {
            <div class="dashboard-content">
                <!-- Cost Timeline -->
                <div class="cost-timeline-section">
                    <div class="section-header">
                        <h3>Cost Projection</h3>
                        <span class="section-subtitle">Annual cost growth over @Projection.Settings.ProjectionYears years</span>
                    </div>
                    <div class="cost-bars">
                        @foreach (var point in GetAllPoints())
                        {
                            var isBaseline = point.Year == 0;
                            var maxCost = GetMaxYearlyCost();
                            var heightPct = maxCost > 0 ? ((double)point.ProjectedYearlyCost * 100.0 / (double)maxCost) : 0;

                            <div class="cost-bar-group @(isBaseline ? "baseline" : "")">
                                <div class="cost-bar-wrapper">
                                    <div class="cost-bar" style="height: @heightPct%">
                                        <span class="cost-value">@FormatCurrencyShort(point.ProjectedYearlyCost)</span>
                                    </div>
                                </div>
                                <div class="cost-bar-label">
                                    <span class="label-year">@point.Label</span>
                                    @if (!isBaseline && point.GrowthFromPrevious > 0)
                                    {
                                        <span class="label-growth">+@point.GrowthFromPrevious.ToString("F0")%</span>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                </div>

                <!-- Cost Summary Cards -->
                <div class="cost-summary-grid">
                    <div class="cost-summary-card total">
                        <div class="cost-card-header">
                            <span class="cost-card-icon">ğŸ’</span>
                            <span class="cost-card-title">Total Investment</span>
                        </div>
                        <div class="cost-card-value">@FormatCurrency(Projection.Summary.TotalCostOverPeriod)</div>
                        <div class="cost-card-detail">Over @Projection.Settings.ProjectionYears year(s)</div>
                    </div>

                    <div class="cost-summary-card increase">
                        <div class="cost-card-header">
                            <span class="cost-card-icon">ğŸ“ˆ</span>
                            <span class="cost-card-title">Cost Growth</span>
                        </div>
                        <div class="cost-card-value">@FormatCurrency(Projection.Summary.CostIncrease)</div>
                        <div class="cost-card-detail">+@Projection.Summary.PercentageCostIncrease.ToString("F0")% from baseline</div>
                    </div>

                    <div class="cost-summary-card average">
                        <div class="cost-card-header">
                            <span class="cost-card-icon">ğŸ“Š</span>
                            <span class="cost-card-title">Average Annual</span>
                        </div>
                        <div class="cost-card-value">@FormatCurrency(Projection.Summary.AverageYearlyCost)</div>
                        <div class="cost-card-detail">Per year average</div>
                    </div>

                    <div class="cost-summary-card monthly">
                        <div class="cost-card-header">
                            <span class="cost-card-icon">ğŸ“…</span>
                            <span class="cost-card-title">Final Monthly</span>
                        </div>
                        <div class="cost-card-value">@FormatCurrency(GetFinalPoint().ProjectedMonthlyCost)</div>
                        <div class="cost-card-detail">Year @Projection.Settings.ProjectionYears projection</div>
                    </div>
                </div>

                <!-- Year-by-Year Cost Table -->
                <div class="cost-table-section">
                    <div class="section-header">
                        <h3>Annual Cost Breakdown</h3>
                    </div>
                    <div class="cost-table-wrapper">
                        <table class="cost-table">
                            <thead>
                                <tr>
                                    <th>Period</th>
                                    <th class="right">Monthly</th>
                                    <th class="right">Yearly</th>
                                    <th class="right">Change</th>
                                    <th class="right">Cumulative</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    decimal cumulative = 0;
                                }
                                @foreach (var point in GetAllPoints())
                                {
                                    var isBaseline = point.Year == 0;
                                    cumulative += point.ProjectedYearlyCost;
                                    <tr class="@(isBaseline ? "baseline-row" : "")">
                                        <td class="period-cell">
                                            <span class="period-dot @(isBaseline ? "baseline" : "")"></span>
                                            @point.Label
                                        </td>
                                        <td class="right">@FormatCurrency(point.ProjectedMonthlyCost)</td>
                                        <td class="right highlight">@FormatCurrency(point.ProjectedYearlyCost)</td>
                                        <td class="right">
                                            @if (isBaseline)
                                            {
                                                <span class="baseline-tag">Baseline</span>
                                            }
                                            else
                                            {
                                                <span class="growth-badge">+@point.GrowthFromPrevious.ToString("F0")%</span>
                                            }
                                        </td>
                                        <td class="right cumulative">@FormatCurrency(cumulative)</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        }

        <!-- Table View -->
        @if (chartView == "table")
        {
            <div class="dashboard-content">
                <div class="full-table-section">
                    <div class="section-header">
                        <h3>Complete Projection Data</h3>
                        <span class="section-subtitle">All metrics across the projection period</span>
                    </div>
                    <div class="full-table-wrapper">
                        <table class="full-table">
                            <thead>
                                <tr>
                                    <th>Period</th>
                                    <th class="center">Apps</th>
                                    <th class="center">Nodes</th>
                                    <th class="center">Workers</th>
                                    <th class="center">vCPU</th>
                                    <th class="center">RAM (GB)</th>
                                    <th class="center">Storage (GB)</th>
                                    @if (Projection.Settings.IncludeCostProjections)
                                    {
                                        <th class="right">Monthly</th>
                                        <th class="right">Yearly</th>
                                    }
                                    <th class="right">Growth</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var point in GetAllPoints())
                                {
                                    var isBaseline = point.Year == 0;
                                    <tr class="@(isBaseline ? "baseline-row" : "")">
                                        <td class="period-cell">
                                            <span class="period-dot @(isBaseline ? "baseline" : "")"></span>
                                            @point.Label
                                        </td>
                                        <td class="center">@point.ProjectedApps</td>
                                        <td class="center highlight">@point.ProjectedNodes</td>
                                        <td class="center">@point.ProjectedWorkerNodes</td>
                                        <td class="center">@point.ProjectedCpu</td>
                                        <td class="center">@point.ProjectedRamGB.ToString("N0")</td>
                                        <td class="center">@point.ProjectedStorageGB.ToString("N0")</td>
                                        @if (Projection.Settings.IncludeCostProjections)
                                        {
                                            <td class="right">@FormatCurrency(point.ProjectedMonthlyCost)</td>
                                            <td class="right">@FormatCurrency(point.ProjectedYearlyCost)</td>
                                        }
                                        <td class="right">
                                            @if (isBaseline)
                                            {
                                                <span class="baseline-tag">Baseline</span>
                                            }
                                            else
                                            {
                                                <span class="growth-badge">+@point.CumulativeGrowth.ToString("F0")%</span>
                                            }
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <div class="empty-dashboard">
            <div class="empty-content">
                <span class="empty-icon">ğŸ“Š</span>
                <h3>No Projection Data</h3>
                <p>Configure growth settings and click "Calculate Projection" to generate your growth forecast.</p>
            </div>
        </div>
    }
</div>

@code {
    [Parameter] public GrowthProjection? Projection { get; set; }
    [Parameter] public string? AdditionalClass { get; set; }

    private string chartView = "resources";

    private List<ProjectionPoint> GetAllPoints()
    {
        if (Projection == null) return new List<ProjectionPoint>();
        var points = new List<ProjectionPoint> { Projection.Baseline };
        points.AddRange(Projection.Points);
        return points;
    }

    private ProjectionPoint GetFinalPoint()
    {
        if (Projection == null || !Projection.Points.Any())
            return Projection?.Baseline ?? new ProjectionPoint();
        return Projection.Points.Last();
    }

    private int GetMaxNodes()
    {
        return GetAllPoints().Max(p => p.ProjectedNodes);
    }

    private decimal GetMaxYearlyCost()
    {
        return GetAllPoints().Max(p => p.ProjectedYearlyCost);
    }

    private string FormatCurrency(decimal value)
    {
        if (value >= 1_000_000)
            return $"${value / 1_000_000:F2}M";
        if (value >= 1_000)
            return $"${value / 1_000:F1}K";
        return $"${value:F0}";
    }

    private string FormatCurrencyShort(decimal value)
    {
        if (value >= 1_000_000)
            return $"${value / 1_000_000:F1}M";
        if (value >= 1_000)
            return $"${value / 1_000:F0}K";
        return $"${value:F0}";
    }
}

<style>
    .growth-projection-dashboard {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HERO METRICS - Top row with key stats
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .hero-metrics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
    }

    .hero-metric {
        display: flex;
        gap: 14px;
        padding: 18px;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        background: var(--bg-secondary, #1a1d21);
        position: relative;
        overflow: hidden;
    }

    .hero-metric::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
    }

    .hero-metric.apps::before { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
    .hero-metric.nodes::before { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
    .hero-metric.cost::before { background: linear-gradient(90deg, #10b981, #34d399); }
    .hero-metric.average::before { background: linear-gradient(90deg, #f59e0b, #fbbf24); }

    .hero-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .hero-metric.apps .hero-icon { background: rgba(59, 130, 246, 0.15); }
    .hero-metric.nodes .hero-icon { background: rgba(139, 92, 246, 0.15); }
    .hero-metric.cost .hero-icon { background: rgba(16, 185, 129, 0.15); }
    .hero-metric.average .hero-icon { background: rgba(245, 158, 11, 0.15); }

    .icon-inner {
        font-size: 1.5rem;
    }

    .hero-content {
        flex: 1;
        min-width: 0;
    }

    .hero-label {
        display: block;
        font-size: 0.75rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 4px;
    }

    .hero-values {
        display: flex;
        align-items: baseline;
        gap: 8px;
    }

    .hero-values.single {
        margin-bottom: 4px;
    }

    .hero-current {
        font-size: 1.1rem;
        color: var(--text-muted);
    }

    .hero-arrow {
        color: var(--text-muted);
        font-size: 1rem;
    }

    .hero-projected, .hero-total {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-primary);
    }

    .hero-change {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 0.8rem;
        margin-top: 4px;
    }

    .hero-change.positive { color: #10b981; }
    .hero-change.negative { color: #ef4444; }
    .hero-change.neutral { color: var(--text-muted); }

    .change-icon {
        font-size: 0.7rem;
    }

    .hero-detail {
        font-size: 0.75rem;
        color: var(--text-muted);
        margin-top: 4px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DASHBOARD TABS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .dashboard-tabs {
        display: flex;
        gap: 8px;
        padding: 6px;
        background: var(--bg-secondary, #1a1d21);
        border-radius: 10px;
        border: 1px solid var(--border-color);
        width: fit-content;
    }

    .tab-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 18px;
        border: none;
        background: transparent;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        color: var(--text-secondary);
    }

    .tab-btn:hover {
        background: var(--bg-tertiary, #13151a);
        color: var(--text-primary);
    }

    .tab-btn.active {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        color: white;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }

    .tab-icon {
        font-size: 1rem;
    }

    .tab-text {
        font-size: 0.9rem;
        font-weight: 500;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DASHBOARD CONTENT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .dashboard-content {
        display: flex;
        flex-direction: column;
        gap: 24px;
    }

    .section-header {
        margin-bottom: 16px;
    }

    .section-header h3 {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    .section-subtitle {
        display: block;
        font-size: 0.8rem;
        color: var(--text-secondary);
        margin-top: 4px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       YEAR PROGRESS CARDS (Resources Tab)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .progress-section {
        background: var(--bg-secondary, #1a1d21);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        padding: 20px;
    }

    .year-progress-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 16px;
    }

    .year-card {
        background: var(--bg-tertiary, #13151a);
        border-radius: 10px;
        padding: 16px;
        border: 1px solid var(--border-color);
        transition: all 0.2s ease;
    }

    .year-card:hover {
        border-color: var(--accent-blue, #3b82f6);
        transform: translateY(-2px);
    }

    .year-card.baseline {
        border-color: #3b82f6;
        border-width: 2px;
    }

    .year-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
    }

    .year-label {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.95rem;
    }

    .year-growth {
        font-size: 0.75rem;
        color: #10b981;
        background: rgba(16, 185, 129, 0.1);
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: 600;
    }

    .year-node-count {
        display: flex;
        align-items: baseline;
        gap: 6px;
        margin-bottom: 12px;
    }

    .node-number {
        font-size: 2rem;
        font-weight: 700;
        color: var(--text-primary);
        line-height: 1;
    }

    .node-label {
        font-size: 0.8rem;
        color: var(--text-secondary);
    }

    .year-progress-bar {
        height: 6px;
        background: var(--border-color);
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 14px;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #8b5cf6, #a78bfa);
        border-radius: 3px;
        transition: width 0.5s ease;
    }

    .progress-fill.baseline-fill {
        background: linear-gradient(90deg, #3b82f6, #60a5fa);
    }

    .year-resources {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .resource-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.8rem;
    }

    .res-icon {
        font-size: 0.9rem;
    }

    .res-value {
        color: var(--text-secondary);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESOURCE TABLE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .breakdown-section {
        background: var(--bg-secondary, #1a1d21);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        padding: 20px;
    }

    .resource-table-wrapper,
    .cost-table-wrapper,
    .full-table-wrapper {
        overflow-x: auto;
    }

    .resource-table,
    .cost-table,
    .full-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-size: 0.85rem;
    }

    .resource-table th,
    .cost-table th,
    .full-table th {
        padding: 12px 16px;
        background: var(--bg-tertiary, #13151a);
        color: var(--text-secondary);
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.7rem;
        letter-spacing: 0.5px;
        border-bottom: 2px solid var(--border-color);
    }

    .resource-table td,
    .cost-table td,
    .full-table td {
        padding: 14px 16px;
        border-bottom: 1px solid var(--border-color);
        color: var(--text-primary);
    }

    .resource-table tr:hover td,
    .cost-table tr:hover td,
    .full-table tr:hover td {
        background: var(--bg-tertiary, #13151a);
    }

    .center { text-align: center; }
    .right { text-align: right; }

    .period-cell {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 500;
    }

    .period-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--accent-blue, #3b82f6);
    }

    .period-dot.baseline {
        background: #10b981;
    }

    .highlight {
        color: var(--accent-blue, #3b82f6) !important;
        font-weight: 600;
    }

    .baseline-row {
        background: rgba(16, 185, 129, 0.05);
    }

    .baseline-tag {
        font-size: 0.7rem;
        padding: 4px 8px;
        background: rgba(16, 185, 129, 0.15);
        color: #10b981;
        border-radius: 4px;
        font-weight: 600;
    }

    .growth-badge {
        font-size: 0.75rem;
        padding: 4px 10px;
        background: rgba(59, 130, 246, 0.15);
        color: #3b82f6;
        border-radius: 4px;
        font-weight: 600;
    }

    .growth-cell {
        min-width: 90px;
    }

    .cumulative {
        color: var(--text-secondary);
        font-size: 0.85rem;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       COST BAR CHART
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .cost-timeline-section {
        background: var(--bg-secondary, #1a1d21);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        padding: 20px;
    }

    .cost-bars {
        display: flex;
        gap: 16px;
        height: 250px;
        padding: 20px 0;
        align-items: flex-end;
    }

    .cost-bar-group {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
    }

    .cost-bar-wrapper {
        flex: 1;
        width: 100%;
        display: flex;
        align-items: flex-end;
        justify-content: center;
    }

    .cost-bar {
        width: 60%;
        max-width: 80px;
        min-height: 30px;
        background: linear-gradient(to top, #10b981, #34d399);
        border-radius: 8px 8px 0 0;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding-top: 8px;
        transition: height 0.5s ease;
    }

    .cost-bar-group.baseline .cost-bar {
        background: linear-gradient(to top, #3b82f6, #60a5fa);
    }

    .cost-value {
        font-size: 0.85rem;
        font-weight: 700;
        color: white;
        text-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    .cost-bar-label {
        text-align: center;
        margin-top: 10px;
    }

    .label-year {
        display: block;
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    .label-growth {
        display: block;
        font-size: 0.75rem;
        color: #10b981;
        margin-top: 2px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       COST SUMMARY CARDS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .cost-summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
    }

    .cost-summary-card {
        background: var(--bg-secondary, #1a1d21);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        padding: 18px;
        position: relative;
        overflow: hidden;
    }

    .cost-summary-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
    }

    .cost-summary-card.total::before { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
    .cost-summary-card.increase::before { background: linear-gradient(90deg, #ef4444, #f87171); }
    .cost-summary-card.average::before { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
    .cost-summary-card.monthly::before { background: linear-gradient(90deg, #10b981, #34d399); }

    .cost-card-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 10px;
    }

    .cost-card-icon {
        font-size: 1.1rem;
    }

    .cost-card-title {
        font-size: 0.8rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .cost-card-value {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 4px;
    }

    .cost-card-detail {
        font-size: 0.8rem;
        color: var(--text-muted);
    }

    .cost-table-section {
        background: var(--bg-secondary, #1a1d21);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        padding: 20px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FULL TABLE VIEW
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .full-table-section {
        background: var(--bg-secondary, #1a1d21);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        padding: 20px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       EMPTY STATE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .empty-dashboard {
        background: var(--bg-secondary, #1a1d21);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        padding: 60px 40px;
    }

    .empty-content {
        text-align: center;
        max-width: 400px;
        margin: 0 auto;
    }

    .empty-icon {
        font-size: 4rem;
        display: block;
        margin-bottom: 16px;
        opacity: 0.4;
    }

    .empty-content h3 {
        margin: 0 0 8px 0;
        font-size: 1.25rem;
        color: var(--text-primary);
    }

    .empty-content p {
        margin: 0;
        color: var(--text-secondary);
        font-size: 0.95rem;
        line-height: 1.5;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESPONSIVE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @@media (max-width: 900px) {
        .hero-metrics {
            grid-template-columns: repeat(2, 1fr);
        }

        .year-progress-cards {
            grid-template-columns: repeat(2, 1fr);
        }

        .cost-bars {
            height: 200px;
        }
    }

    @@media (max-width: 600px) {
        .hero-metrics {
            grid-template-columns: 1fr;
        }

        .year-progress-cards {
            grid-template-columns: 1fr;
        }

        .dashboard-tabs {
            width: 100%;
        }

        .tab-btn {
            flex: 1;
            justify-content: center;
        }

        .cost-summary-grid {
            grid-template-columns: 1fr 1fr;
        }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LIGHT THEME
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-theme="light"] .hero-metric,
    [data-theme="light"] .dashboard-tabs,
    [data-theme="light"] .progress-section,
    [data-theme="light"] .breakdown-section,
    [data-theme="light"] .cost-timeline-section,
    [data-theme="light"] .cost-summary-card,
    [data-theme="light"] .cost-table-section,
    [data-theme="light"] .full-table-section,
    [data-theme="light"] .empty-dashboard {
        background: #fff;
    }

    [data-theme="light"] .year-card,
    [data-theme="light"] .resource-table th,
    [data-theme="light"] .cost-table th,
    [data-theme="light"] .full-table th {
        background: #f8f9fa;
    }
</style>
